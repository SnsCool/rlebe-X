---
name: glm-generate
description: GLM (Z.ai) API を使用してテキスト・コードを生成する
---

## 発動条件

- 「glm で生成」「GLM で生成」「glm 生成」と言われた時
- 「glm で〇〇を生成して」「GLM で〇〇を作成して」などの依頼
- コード実装タスク: 「実装して」「コードを書いて」「作って」「開発して」
- テキスト生成タスク: 長文の文章作成、ドキュメント生成

**注意**: コード実装・テキスト生成は GLM が優先。Codex はレビュー専用。

## 使い方

```bash
node .claude/skills/glm-generate/scripts/glm-markdown.js \
  --prompt <prompt-file> \
  [--context <context-file>...] \
  [--output <output-file>] \
  [--model <model>]
```

## オプション

| オプション | 必須 | 説明 |
|-----------|------|------|
| --prompt | はい | プロンプトファイルのパス |
| --context | いいえ | 追加コンテキストファイル（複数指定可） |
| --output | いいえ | 出力先ファイルパス（省略時は stdout） |
| --model | いいえ | 使用モデル（デフォルト: glm-4.7） |

## 利用可能なモデル

| モデル | 説明 |
|--------|------|
| `glm-4.7` | 最新・最高性能（デフォルト） |
| `glm-4.6` | 前バージョン |
| `glm-4.5` | 安定版 |
| `glm-4.5-Air` | 軽量版 |

## 環境変数

- `ZAI_API_KEY`: Z.ai API キー（必須）

## API エンドポイント

Anthropic互換エンドポイント（サブスクリプション対応）:
```
https://api.z.ai/api/anthropic/v1/messages
```

## レスポンス形式

常に Markdown 形式で出力されます。

## 注意事項

### レート制限（429 エラー）

Z.ai API にはレート制限があります。エラーが発生した場合：

- 10〜30秒待ってから再試行（自動リトライ機能あり）
- 頻繁に発生する場合は API 使用頻度を下げる

### 並列実行の制限

- 同時実行の上限は約5件程度
- 大量のリクエストは5件ずつバッチ処理し、各バッチ間で10〜30秒待機
